<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
            />
        <script
            src="https://kit.fontawesome.com/0c9d985b68.js"
            crossorigin="anonymous"
            ></script>
        <link rel="icon" href="../static/images/fevicon.jpg" type="image/x-icon" />
        <title>Sign In</title>
        <style>
            .custom-btn {
            color: white; /* Text color */
            border-color: white; /* Border color */
            }
            .custom-btn:hover {
            background-color: #ea6981; /* Background color on hover */
            }
        </style>
    </head>
    <body
        class="vh-120"
        style="background-image: url('../static/images/loginbg.jpg')"
        >
        <section>
            <div class="container py-5 h-120">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-md-6">
                        <div class="card mx-auto" style="border-radius: 1rem">
                            <div class="card-body p-4 p-lg-5 text-black text-center">
                                <form action="" method="post">
                                    <h5 class="mb-3 pb-3" style="letter-spacing: 1px">
                                        Sign up to your Account
                                    </h5>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-floating mb-4">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    id="floatingFirstName"
                                                    placeholder="First Name"
                                                    name="first_name"
                                                    required
                                                    />
                                                <label for="floatingFirstName">First Name</label>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-floating mb-4">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    id="floatingLastName"
                                                    placeholder="Last Name"
                                                    name="last_name"
                                                    required
                                                    />
                                                <label for="floatingLastName">Last Name</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-floating mb-4">
                                        <input
                                            type="email"
                                            class="form-control"
                                            id="floatingEmail"
                                            placeholder="name@example.com"
                                            name="email"
                                            required
                                            />
                                        <label for="floatingEmail">Email address</label>
                                    </div>
                                    <div class="form-floating mb-4">
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="floatingPassword"
                                            placeholder="Password"
                                            name="password"
                                            required
                                            />
                                        <label for="floatingPassword">Password</label>
                                        <i
                                            class="fas fa-eye-slash position-absolute top-50 translate-middle-y end-0 pe-2 toggle-password"
                                            style="cursor: pointer"
                                            ></i>
                                    </div>
                                    <div class="form-floating mb-4">
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="floatingConfirmPassword"
                                            placeholder="Confirm Password"
                                            required
                                            />
                                        <label for="floatingConfirmPassword"
                                            >Confirm Password</label
                                            >
                                        <i
                                            class="fas fa-eye-slash position-absolute top-50 translate-middle-y end-0 pe-2 toggle-Confirmpassword"
                                            style="cursor: pointer"
                                            ></i>
                                    </div>
                                    {% if message %}
                                    <div
                                        class="alert alert-danger alert-dismissible fade show d-flex align-items-center"
                                        role="alert"
                                        >
                                        <i class="fa-solid fa-triangle-exclamation"></i>
                                        <div class="ms-2">{{ message }}</div>
                                        <button
                                            type="button"
                                            class="btn-close"
                                            data-bs-dismiss="alert"
                                            aria-label="Close"
                                            ></button>
                                    </div>
                                    {% endif %}
                                    <div class="mb-4">
                                        <button
                                            class="btn btn-dark custom-btn btn-lg btn-block col-12 mt-4"
                                            type="submit"
                                            >
                                        Sign up
                                        </button>
                                    </div>
                                    <p class="mb-4 mt-1">
                                        Already have an account?
                                        <a href="/login">Log in here</a>
                                    </p>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </body>
    <script>
        function setupPasswordToggle(inputId, toggleIconClass) {
          var passwordInput = document.getElementById(inputId);
          var eyeIcon = document.querySelector('.' + toggleIconClass);
        
          eyeIcon.addEventListener('click', function () {
            var type =
              passwordInput.getAttribute('type') === 'password'
                ? 'text'
                : 'password';
            passwordInput.setAttribute('type', type);
            eyeIcon.classList.toggle('fa-eye-slash');
            eyeIcon.classList.toggle('fa-eye');
          });
        }
        
        document.addEventListener('DOMContentLoaded', function () {
          setupPasswordToggle('floatingPassword', 'toggle-password');
          setupPasswordToggle('floatingConfirmPassword', 'toggle-Confirmpassword');
        });
        function validatePassword() {
          var password = document.getElementById('floatingPassword').value;
          var minLength = 5;
          var hasMinLength = password.length >= minLength;
          var hasLetterAndNumber = /^(?=.*[a-zA-Z])(?=.*\d)/.test(password);
          var hasSpecialCharacter = /[!@#$%^&*?]/.test(password);
        
          if (!hasMinLength) {
            document
              .getElementById('floatingPassword')
              .setCustomValidity(
                'Password should have at least ' + minLength + ' characters.'
              );
            passwordErrorElement.style.display = 'block';
          } else if (!hasLetterAndNumber) {
            document
              .getElementById('floatingPassword')
              .setCustomValidity(
                'Password should include a combination of letters and numbers.'
              );
            passwordErrorElement.style.display = 'block';
          } else if (!hasSpecialCharacter) {
            document
              .getElementById('floatingPassword')
              .setCustomValidity(
                'Password should include at least one special character (!@#$%^&*?).'
              );
            passwordErrorElement.style.display = 'block';
          } else {
            document.getElementById('floatingPassword').setCustomValidity('');
            passwordErrorElement.style.display = 'none';
          }
        }
        
        document
          .getElementById('floatingPassword')
          .addEventListener('input', validatePassword);
        
        function validateConfirmPassword() {
          var password = document.getElementById('floatingPassword').value;
          var confirmPassword = document.getElementById('floatingConfirmPassword');
        
          if (password !== confirmPassword.value) {
            confirmPassword.setCustomValidity('Passwords do not match');
          } else {
            confirmPassword.setCustomValidity('');
          }
        }
        
        document
          .getElementById('floatingConfirmPassword')
          .addEventListener('input', validateConfirmPassword);
    </script>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"
        ></script>
</html>